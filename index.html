<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>JLPT Learning Site</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f4f4f9; }
    h1 { color: #333; }
    iframe { width: 100%; max-width: 600px; height: 340px; margin-bottom: 10px; }
    .subtitle { margin: 5px 0; padding: 5px; cursor: pointer; }
    .subtitle:hover { background: #ddd; }
    #meaning { margin-top: 20px; padding: 10px; background: #fff; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h1>JLPT Practice Video</h1>

  <!-- YouTube Video -->
 <iframe id="ytplayer" 
        src="https://www.youtube.com/embed/FgCPc5qPCh0" 
        frameborder="0" 
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
        allowfullscreen>
</iframe>



  <h2>Subtitles (click a word):</h2>
   <div id="subtitles"></div>

<!-- Word meaning will show here -->
<div id="word-info" style="margin-top:20px; font-size:18px; color:darkblue;">
  üëâ Click a Japanese word to see meaning here
</div>


  <script>
    const subsDiv = document.getElementById("subs");
    const meaningDiv = document.getElementById("meaning");

    // Load subtitles from VTT file
    fetch("subs/n5lesson1.vtt")
      .then(r => r.text())
      .then(text => {
        const lines = text.split("\n").filter(l => l && !l.includes("-->") && l !== "WEBVTT");
        lines.forEach(line => {
          const div = document.createElement("div");
          div.className = "subtitle";
          line.split("").forEach(word => {
            const span = document.createElement("span");
            span.textContent = word;
            span.style.margin = "2px";
            span.style.cursor = "pointer";
            span.onclick = () => lookupWord(word);
            div.appendChild(span);
          });
          subsDiv.appendChild(div);
        });
      });

    // Small test dictionary
    const dict = {
      "‰ªä": "now",
      "Êó•": "day/sun",
      "„ÅØ": "topic marker",
      "Â§©": "sky/heaven",
      "Ê∞ó": "mood/spirit/air",
      "Âãâ": "study",
      "Âº∑": "strong",
      "Ê•Ω": "fun",
      "„Åó": "do",
      "„ÅÑ": "good"
    };

    function lookupWord(word) {
      meaningDiv.innerHTML = `<strong>Meaning:</strong> ${word} ‚Üí ${dict[word] || "Not in dictionary yet"}`;
    }
  <script>
async function loadDictionary() {
  // Load the dictionary file we created in dict/n5.json
  const res = await fetch("dict/n5.json");
  return await res.json();
}

let dictionary = {};

// Load the dictionary once site opens
loadDictionary().then(dict => {
  dictionary = dict;
  console.log("Dictionary loaded:", dictionary);
});

// When a word is clicked in subtitle
function lookupWord(word) {
  if (dictionary[word]) {
    document.getElementById("word-info").innerHTML = `
      <b>${word}</b> (${dictionary[word].reading})<br>
      ${dictionary[word].meaning}
    `;
  } else {
    document.getElementById("word-info").innerHTML = `No entry found for: ${word}`;
  }
}
</script>
</body>
</html>

